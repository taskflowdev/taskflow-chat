<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <div class="mb-3">
        <i class="bi bi-chat-dots-fill" style="font-size: 3rem; color: #25d366;"></i>
      </div>
      <h2>Welcome Back</h2>
      <p>Sign in to continue to TaskFlow Chat</p>
    </div>

    <!-- Error Alert -->
    <div *ngIf="errorMessage" class="alert alert-danger d-flex align-items-center mb-3" role="alert">
      <i class="bi bi-exclamation-triangle-fill me-2"></i>
      {{ errorMessage }}
    </div>

    <!-- Login Form -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <!-- Username Field -->
      <div class="form-floating mb-3">
        <input 
          type="text" 
          class="form-control"
          [class.is-invalid]="getFieldError('userName')"
          id="userName"
          formControlName="userName"
          placeholder="Username"
          autocomplete="username">
        <label for="userName">
          <i class="bi bi-person me-2"></i>Username
        </label>
        <div *ngIf="getFieldError('userName')" class="invalid-feedback">
          {{ getFieldError('userName') }}
        </div>
      </div>

      <!-- Password Field -->
      <div class="form-floating mb-3 position-relative">
        <input 
          [type]="showPassword ? 'text' : 'password'"
          class="form-control pe-5"
          [class.is-invalid]="getFieldError('password')"
          id="password"
          formControlName="password"
          placeholder="Password"
          autocomplete="current-password">
        <label for="password">
          <i class="bi bi-lock me-2"></i>Password
        </label>
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility()"
          tabindex="-1">
          <i [class]="showPassword ? 'bi bi-eye-slash' : 'bi bi-eye'"></i>
        </button>
        <div *ngIf="getFieldError('password')" class="invalid-feedback">
          {{ getFieldError('password') }}
        </div>
      </div>

      <!-- Remember Me -->
      <div class="form-check mb-3">
        <input 
          class="form-check-input" 
          type="checkbox" 
          id="rememberMe"
          formControlName="rememberMe">
        <label class="form-check-label" for="rememberMe">
          Remember me
        </label>
      </div>

      <!-- Login Button -->
      <button 
        type="submit" 
        class="btn btn-primary w-100 mb-3"
        [disabled]="isLoading">
        <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
        <i *ngIf="!isLoading" class="bi bi-box-arrow-in-right me-2"></i>
        {{ isLoading ? 'Signing in...' : 'Sign In' }}
      </button>

      <!-- Forgot Password Link -->
      <div class="text-center mb-3">
        <a routerLink="/forgot-password" class="auth-link">Forgot your password?</a>
      </div>

      <!-- Divider -->
      <div class="text-center mb-3">
        <div class="d-flex align-items-center">
          <div class="flex-grow-1">
            <hr class="my-0">
          </div>
          <span class="px-3 text-muted small">or</span>
          <div class="flex-grow-1">
            <hr class="my-0">
          </div>
        </div>
      </div>

      <!-- Sign Up Link -->
      <div class="text-center">
        <span class="text-muted">Don't have an account? </span>
        <a routerLink="/signup" class="auth-link">Sign Up</a>
      </div>
    </form>
  </div>
</div>