<div class="main-chat-container" [class.mobile-view]="isMobileView">
  <!-- Chat Content Area without Header -->
  <div class="chat-content-area">
    <!-- Left Sidebar with Chat List -->
    <app-chat-sidebar
      [chats]="chats"
      [selectedChatId]="selectedChatId"
      [loading]="loading"
      [class.mobile-hidden]="isMobileView && !showSidebar"
      (chatSelect)="onChatSelect($event)">
    </app-chat-sidebar>

    <!-- Right Panel with Conversation -->
    <app-chat-conversation
      [conversation]="currentConversation"
      [currentUserId]="user?.id || null"
      [loading]="loadingMessages"
      [showBackButton]="isMobileView"
      [class.mobile-hidden]="isMobileView && showSidebar"
      (sendMessage)="onSendMessage($event)"
      (backToChats)="onBackToChats()"
      (groupUpdated)="onGroupUpdated()"
      (groupDeleted)="onGroupDeleted($event)">
    </app-chat-conversation>
  </div>

  <!-- Create Group Dialog -->
  <app-create-group-dialog
    *ngIf="showCreateGroupDialog"
    (groupCreated)="onGroupCreated()">
  </app-create-group-dialog>

  <!-- Search Group Dialog -->
  <app-group-search-dialog
    *ngIf="showSearchGroupDialog"
    (groupSelected)="onGroupFromSearchSelected($event)"
    (groupJoined)="onGroupJoined()">
  </app-group-search-dialog>

  <!-- Group Info Dialog -->
  <app-group-info-dialog
    *ngIf="showGroupInfoDialog && selectedChatId"
    [groupId]="selectedChatId"
    (closed)="router.navigate([], { fragment: undefined, queryParamsHandling: 'preserve' })"
    (groupUpdated)="onGroupUpdated()"
    (groupDeleted)="onGroupDeleted($event)">
  </app-group-info-dialog>

  <!-- Keyboard Shortcuts Dialog -->
  <app-keyboard-shortcuts-dialog
    *ngIf="showKeyboardShortcutsDialog">
  </app-keyboard-shortcuts-dialog>
</div>
