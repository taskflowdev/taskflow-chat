<div class="dialog-overlay" (click)="closeDialog()">
  <div class="dialog-container" (click)="$event.stopPropagation()">
    <!-- Dialog Content -->
    <div class="dialog-content">
      <!-- Header -->
      <div class="dialog-header">
        <!-- <div class="fs-1 mb-2">
          <i class="bi bi-info-circle"></i>
        </div> -->
        <h1 class="main-title">Group Information</h1>
        <p class="subtitle">View and edit group details</p>
        <button type="button" class="btn-close" (click)="closeDialog()" aria-label="Close">
          <i class="bi bi-x"></i>
        </button>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoadingDetails" class="loading-content">
        <div class="form-group-skeleton">
          <app-skeleton-loader type="text" width="80px" height="14px"></app-skeleton-loader>
          <app-skeleton-loader type="rectangle" width="100%" height="44px"></app-skeleton-loader>
        </div>

        <div class="form-group-skeleton">
          <app-skeleton-loader type="text" width="100px" height="14px"></app-skeleton-loader>
          <div class="toggle-skeleton">
            <app-skeleton-loader type="rectangle" width="44px" height="24px"></app-skeleton-loader>
          </div>
          <app-skeleton-loader type="text" width="200px" height="12px"></app-skeleton-loader>
        </div>

        <div class="info-section-skeleton">
          <app-skeleton-loader type="text" width="120px" height="14px"></app-skeleton-loader>
          <app-skeleton-loader type="text" width="180px" height="12px"></app-skeleton-loader>
        </div>

        <div class="button-skeleton">
          <app-skeleton-loader type="rectangle" width="100%" height="44px"></app-skeleton-loader>
        </div>
        <div class="button-skeleton">
          <app-skeleton-loader type="rectangle" width="100%" height="44px"></app-skeleton-loader>
        </div>
      </div>

      <!-- Loaded Form -->
      <form *ngIf="!isLoadingDetails" [formGroup]="groupInfoForm" (ngSubmit)="onSubmit()" novalidate class="group-info-form">
        <!-- Group Avatar Placeholder -->
        <div class="group-avatar-section">
          <div class="avatar-circle">
            <i class="bi bi-people"></i>
          </div>
          <p class="avatar-hint">Group Avatar</p>
        </div>

        <!-- Group Name Field -->
        <app-common-input
          label="Group Name"
          placeholder="Enter group name"
          formControlName="groupName"
          [isInvalid]="getFieldError('groupName')"
          [errorMessage]="getErrorMessage('groupName')"
        ></app-common-input>

        <!-- Public/Private Toggle -->
        <app-common-toggle
          label="Group Privacy"
          description="Enable this to make the group publicly visible"
          formControlName="isPublic"
        ></app-common-toggle>

        <!-- Additional Info -->
        <div class="info-section" *ngIf="groupInfo">
          <div class="info-item" *ngIf="groupInfo.memberCount !== undefined">
            <span class="info-label">Members:</span>
            <span class="info-value">{{ groupInfo.memberCount }}</span>
          </div>
          <div class="info-item" *ngIf="groupInfo.createdAt">
            <span class="info-label">Created:</span>
            <span class="info-value">{{ groupInfo.createdAt | date: 'short' }}</span>
          </div>
        </div>

        <!-- Update Button -->
        <app-common-button
          type="submit"
          variant="primary"
          [fullWidth]="true"
          [loading]="isLoading"
          [disabled]="groupInfoForm.invalid || groupInfoForm.pristine"
        >
          {{ isLoading ? 'Updating...' : 'Update Group' }}
        </app-common-button>

        <!-- Cancel Button -->
        <app-common-button
          type="button"
          variant="secondary"
          [fullWidth]="true"
          [disabled]="isLoading"
          (clicked)="closeDialog()"
        >
          Cancel
        </app-common-button>
      </form>
    </div>
  </div>
</div>
