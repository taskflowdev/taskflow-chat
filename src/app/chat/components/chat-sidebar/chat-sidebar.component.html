<aside class="chat-sidebar">
  <div class="sidebar-header">
    <h3 class="sidebar-title">Chats</h3>
    <div class="header-actions">
      <!-- Search Button -->
      <button class="btn search-btn" [appCommonTooltip]="searchTooltip" [tooltipPosition]="TooltipPosition.BOTTOM"
        (click)="onSearchGroups()">
        <i class="bi bi-search"></i>
      </button>
      <ng-template #searchTooltip>
        Search <span class="shortcut">Ctrl + K</span>
      </ng-template>

      <!-- New Chat Button -->
      <button class="btn new-chat-btn" [appCommonTooltip]="btnCreateGroupTooltip" [tooltipPosition]="TooltipPosition.BOTTOM"
        (click)="onCreateGroup()">
        <i class="bi bi-plus-lg"></i>
      </button>
      <ng-template #btnCreateGroupTooltip>
        New Chat <span class="shortcut">Ctrl + N</span>
      </ng-template>

      <!-- User Settings Dropdown -->
      <app-common-dropdown
        [items]="userDropdownItems"
        buttonIcon="bi-three-dots-vertical"
        buttonClass="btn settings-btn"
        buttonTitle="Settings"
        (itemSelected)="onUserDropdownItemSelected($event)">
      </app-common-dropdown>
    </div>
  </div>

  <div class="sidebar-content">
    <!-- Loading State -->
    <div *ngIf="loading" class="chats-list">
      <app-skeleton-loader
        *ngFor="let item of skeletonItems; trackBy: trackBySkeletonIndex"
        type="chat-item"
        [fadeOpacity]="item.opacity">
      </app-skeleton-loader>
    </div>

    <!-- Loaded Chats -->
    <div class="chats-list" *ngIf="!loading && chats.length > 0">
      <app-chat-item *ngFor="let chat of chats; trackBy: trackByGroupId" [chat]="chat"
        [isActive]="isActivechat(chat.groupId)" (chatSelect)="onChatSelect($event)">
      </app-chat-item>
    </div>

    <!-- No Chats State -->
    <div *ngIf="!loading && chats.length === 0" class="no-chats">
      <i class="bi bi-chat-text empty-icon"></i>
      <p class="empty-text">No conversations yet</p>
      <button class="btn start-chat-btn" (click)="onCreateGroup()">
        <i class="bi bi-plus-circle-fill me-1"></i>
        New Group
      </button>
    </div>
  </div>
</aside>
