<div class="accent-selector" [class.compact]="compact" [class.readonly]="readonly">
  <!-- Theme Variants Grid -->
  <div class="theme-variants-grid" *ngIf="availableVariants.length > 0">
    <div 
      class="theme-variant-item"
      *ngFor="let variant of availableVariants"
      [class.selected]="variant.id === selectedVariantId"
      [class.hovered]="variant.id === hoveredVariantId"
      (click)="onVariantSelect(variant.id)"
      (mouseenter)="onVariantHover(variant.id)"
      (mouseleave)="onVariantHover(null)"
      (keydown)="onColorKeyDown($event, variant.id)"
      [attr.role]="readonly ? 'presentation' : 'button'"
      [attr.tabindex]="readonly ? '-1' : '0'"
      [attr.aria-label]="readonly ? null : 'Select ' + variant.name + ' theme'"
      [title]="variant.name + ': ' + variant.description">
      
      <!-- Primary Color Circle -->
      <div class="color-circle primary" 
           [style.background-color]="variant.accentColors.primary">
        <!-- Selection Indicator -->
        <div class="selection-indicator" *ngIf="variant.id === selectedVariantId">
          <i class="bi bi-check-lg"></i>
        </div>
        <!-- Hover Preview -->
        <div class="hover-preview" *ngIf="variant.id === hoveredVariantId && !readonly">
          <i class="bi bi-eye"></i>
        </div>
      </div>
      
      <!-- Secondary Color Ring -->
      <div class="color-ring" 
           [style.border-color]="variant.accentColors.secondary">
      </div>
      
      <!-- Theme Name -->
      <div class="theme-name" *ngIf="!compact">{{ variant.name }}</div>
    </div>
  </div>

  <!-- Legacy Color Grid (for backward compatibility) -->
  <div class="accent-colors-grid" *ngIf="availableVariants.length === 0">
    <div class="accent-color-item"
         *ngFor="let colorType of displayOrder"
         [class.interactive]="!readonly"
         (click)="onColorClick(colorType)"
         (keydown)="onColorKeyDown($event, colorType)"
         [attr.role]="readonly ? 'presentation' : 'button'"
         [attr.tabindex]="readonly ? '-1' : '0'"
         [attr.aria-label]="readonly ? null : 'Select ' + getColorLabel(colorType) + ' color'"
         [title]="getColorLabel(colorType) + ': ' + getColorValue(colorType)">
      
      <div class="color-swatch" 
           [style.background-color]="getColorValue(colorType)"
           [attr.data-color]="getColorValue(colorType)">
        <div class="color-overlay" *ngIf="!readonly && !compact">
          <i class="bi bi-palette2"></i>
        </div>
      </div>
      
      <div class="color-info" *ngIf="!compact">
        <span class="color-label">{{ getColorLabel(colorType) }}</span>
        <span class="color-value">{{ getColorValue(colorType) }}</span>
      </div>
    </div>
  </div>

  <!-- Compact info -->
  <div class="compact-info" *ngIf="compact && availableVariants.length > 0">
    <small class="text-muted">
      <i class="bi bi-palette me-1"></i>
      {{ availableVariants.length }} color themes
    </small>
  </div>
</div>