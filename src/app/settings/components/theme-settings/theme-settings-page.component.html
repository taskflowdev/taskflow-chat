<div class="theme-settings-page">
  <div class="p-4">
    <!-- Loading State -->
    <div *ngIf="themeService.isLoading()">
      <div class="d-flex justify-content-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading themes...</span>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div *ngIf="themeService.error()">
      <div class="alert alert-danger" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        {{ themeService.error() }}
      </div>
    </div>

    <!-- Theme Settings Content -->
    <div *ngIf="!themeService.isLoading() && !themeService.error()">
      <div class="settings-section">
        <h2 class="h5 mb-3">
          <i class="bi bi-palette me-2"></i>
          Appearance Settings
        </h2>
        <p class="text-muted mb-4">
          Customize your visual experience with light and dark themes, plus accent colors.
          Your settings will automatically sync across all devices.
        </p>

        <!-- Theme Mode Selector -->
        <div class="mb-4">
          <app-theme-mode-selector
            [currentMode]="themeService.userPreferences().themeMode"
            [syncWithSystem]="themeService.userPreferences().syncWithSystem"
            [systemPrefersDark]="themeService.systemPrefersDark()"
            (modeChange)="onThemeModeChange($event)"
            (systemSyncToggle)="onSystemSyncToggle($event)">
          </app-theme-mode-selector>
        </div>

        <!-- Theme Panels -->
        <div class="row">
          <div class="col-lg-6 mb-4">
            <app-theme-panel
              mode="light"
              title="Light Theme"
              description="Choose your preferred light theme style"
              [themes]="lightThemes"
              [selectedVariantId]="themeService.userPreferences().lightThemeVariantId"
              [isActive]="isLightModeActive"
              (variantChange)="onThemeVariantChange('light', $event)">
            </app-theme-panel>
          </div>

          <div class="col-lg-6 mb-4">
            <app-theme-panel
              mode="dark"
              title="Dark Theme" 
              description="Choose your preferred dark theme style"
              [themes]="darkThemes"
              [selectedVariantId]="themeService.userPreferences().darkThemeVariantId"
              [isActive]="isDarkModeActive"
              (variantChange)="onThemeVariantChange('dark', $event)">
            </app-theme-panel>
          </div>
        </div>

        <!-- Theme Preview -->
        <div class="mb-4">
          <app-theme-preview
            [currentTheme]="themeService.currentTheme()"
            [effectiveMode]="themeService.effectiveThemeMode()">
          </app-theme-preview>
        </div>
      </div>
    </div>
  </div>
</div>