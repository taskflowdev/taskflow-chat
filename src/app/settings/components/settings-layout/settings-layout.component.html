<div class="settings-layout">
  <div class="settings-sidebar">
    <!-- Show sidebar skeleton while loading -->
    <ng-container *ngIf="(loading$ | async) || !(catalogLoaded$ | async); else sidebarContent">
      <app-skeleton-loader type="settings-sidebar"></app-skeleton-loader>
    </ng-container>
    <ng-template #sidebarContent>
      <app-settings-sidebar></app-settings-sidebar>
    </ng-template>
  </div>
  <div class="settings-content" (scroll)="onScroll($event)">
    <!-- Sticky Search Bar (appears on scroll up) -->
    <div class="sticky-search-container" [class.visible]="showStickySearch">
      <app-settings-search></app-settings-search>
    </div>
    
    <!-- Regular Search Component (always in flow) -->
    <div class="regular-search-container">
      <app-settings-search></app-settings-search>
    </div>
    
    <!-- Show search results when search is active, otherwise show category content -->
    <ng-container *ngIf="isSearchActive$ | async; else categoryContent">
      <app-settings-search-results></app-settings-search-results>
    </ng-container>
    
    <ng-template #categoryContent>
      <router-outlet></router-outlet>
    </ng-template>
  </div>
</div>