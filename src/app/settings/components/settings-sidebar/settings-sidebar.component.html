<div class="sidebar-container">
  <h3 class="sidebar-title">{{ 'settings.title' | translate }}</h3>
  <nav class="sidebar-nav">
    <!-- Profile Link with Avatar (Static) -->
    <a [routerLink]="['/settings', 'profile']" routerLinkActive="active" class="sidebar-link profile-link"
      *ngIf="currentUser$ | async as user">
      <div class="profile-avatar-small">
        <div class="avatar-circle-small">
          {{ getUserInitials(user) }}
        </div>
      </div>
      <div class="profile-info">
        <div class="profile-name">{{ user.fullName || user.userName }}</div>
        <div class="profile-subtitle">{{ 'settings.profile.account-manager' | translate }}</div>
      </div>
    </a>

    <!-- Divider -->
    <div class="sidebar-divider"></div>

    <!-- Search Link -->
    <a [routerLink]="['/settings', 'search']" routerLinkActive="active" class="sidebar-link">
      <!-- Default Icon -->
      <i class="bi sidebar-icon default-icon bi-binoculars"></i>

      <!-- Active Icon -->
      <i class="bi sidebar-icon active-icon bi-binoculars-fill"></i>

      <span class="category-name">Search</span>

      <span class="new-label" aria-label="New" [appCommonTooltip]="newSearchTooltip">
        <i class="bi bi-stars"></i>
      </span>
    </a>

    <!-- Dynamic Categories from Catalog -->
    <a *ngFor="let category of sortedCategories$ | async" [routerLink]="['/settings', category.key]"
      routerLinkActive="active" #rla="routerLinkActive" class="sidebar-link">

      <!-- Default Icon -->
      <i class="bi sidebar-icon default-icon" [ngClass]="'bi-' + category.icon"></i>

      <!-- Active Icon -->
      <i class="bi sidebar-icon active-icon" [ngClass]="'bi-' + category.iconSelected"></i>

      <span class="category-name">{{ getCategoryName(category) }}</span>

      <span *ngIf="category.beta" class="beta-label" aria-label="Beta" [appCommonTooltip]="betaTooltip">
        <i class="bi bi-flask"></i>
      </span>
    </a>
  </nav>
</div>

<!-- Tooltip template for new search feature -->
<ng-template #newSearchTooltip>
  <div class="tooltip-content">
    <span class="new-label-tooltip" aria-label="New">
      <i class="bi bi-stars"></i> Search (New)
    </span>
    <p>Quickly locate settings across all categories using one simple search.</p>
  </div>
</ng-template>

<ng-template #betaTooltip>
  <div class="tooltip-content">
    <span class="beta-label-tooltip" aria-label="Beta">
      <i class="bi bi-flask"></i> Beta
    </span>
    <p>This settings category is in beta and may change as improvements are made.</p>
  </div>
</ng-template>