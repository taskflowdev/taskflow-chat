<div class="setting-item">
  <div class="setting-header">
    <div class="setting-info">
      <label class="setting-label">{{ settingKey.label }}</label>
      <p class="setting-description" *ngIf="settingKey.description">
        {{ settingKey.description }}
      </p>
      <p class="setting-default-hint" *ngIf="settingKey.default !== null && settingKey.default !== undefined">
        <small>Default: {{ settingKey.default }}</small>
      </p>
    </div>
    <div class="setting-actions">
      <button
        *ngIf="isModified"
        type="button"
        class="btn btn-sm btn-outline-secondary reset-btn"
        (click)="onResetToDefault()"
        title="Reset to default"
      >
        <i class="bi bi-arrow-counterclockwise"></i> Reset
      </button>
    </div>
  </div>

  <div class="setting-control">
    <!-- Boolean type - Toggle Switch -->
    <app-toggle-control
      *ngIf="controlType === 'boolean'"
      [value]="currentValue"
      [disabled]="isSaving"
      (valueChange)="onValueChange($event)"
    ></app-toggle-control>

    <!-- Select type - Dropdown -->
    <app-select-control
      *ngIf="controlType === 'select' && hasOptions"
      [value]="currentValue"
      [options]="settingKey.options!"
      [disabled]="isSaving"
      (valueChange)="onValueChange($event)"
    ></app-select-control>

    <!-- Radio type - Radio Group -->
    <app-radio-control
      *ngIf="controlType === 'radio' && hasOptions"
      [value]="currentValue"
      [options]="settingKey.options!"
      [name]="settingKey.key!"
      [disabled]="isSaving"
      (valueChange)="onValueChange($event)"
    ></app-radio-control>

    <div *ngIf="isSaving" class="saving-indicator">
      <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
      <span class="ms-2">Saving...</span>
    </div>
  </div>
</div>
