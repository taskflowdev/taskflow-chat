<div class="settings-search-container">
  <div class="search-input-wrapper">
    <i class="bi bi-search search-icon"></i>
    <input #searchInput type="text" class="search-input" placeholder="Search settings..." [(ngModel)]="searchQuery"
      (input)="onSearchInput($event)" (focus)="onSearchFocus()" (blur)="onSearchBlur()" 
      (keypress)="onSearchKeyPress($event)" aria-label="Search settings" aria-describedby="search-result-count" />
    <div class="search-actions">
      <span class="shortcut-key" aria-hidden="true">/</span>
      <button *ngIf="isSearchActive" class="clear-button" (click)="clearSearch()" aria-label="Clear search"
        type="button">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
  </div>

  <!-- Recent Searches Dropdown -->
  <div class="recent-searches-dropdown" *ngIf="showRecentSearches && recentSearches.length > 0">
    <div class="recent-searches-header">
      <span class="recent-searches-title">
        <i class="bi bi-clock-history"></i>
        Recent Searches
      </span>
      <button class="clear-all-button" (click)="clearAllRecentSearches($event)" type="button" 
        aria-label="Clear all recent searches">
        Clear All
      </button>
    </div>
    <div class="recent-searches-list">
      <div *ngFor="let search of recentSearches" class="recent-search-item" (click)="useRecentSearch(search.query)">
        <i class="bi bi-search recent-search-icon"></i>
        <span class="recent-search-query">{{ search.query }}</span>
        <button class="remove-recent-button" (click)="clearRecentSearch($event, search.query)" type="button"
          aria-label="Remove from recent searches">
          <i class="bi bi-x"></i>
        </button>
      </div>
    </div>
  </div>

  <div id="search-result-count" class="search-result-count" aria-live="polite" aria-atomic="true"
    *ngIf="isSearchActive">
    {{ resultCount }} {{ resultCount === 1 ? 'result' : 'results' }}
  </div>
  <div class="search-hint" *ngIf="!isSearchActive" aria-hidden="true">
    <i class="bi bi-lightbulb hint-icon"></i>
    Press <span class="hint-key">/</span> to jump here, <span class="hint-key">Esc</span> to clear.
  </div>
</div>
